<?php
/**
 * Minicart block in header
 *
 * @var $block \IdealCode\MobileStore\Block\Cart\Sidebar
 */
?>
<div class="cart" data-block="minicart">
    <a href="#" data-bind="scope: 'minicart_content'">
        <span data-bind="blockLoader: isLoading">
            <span class="block">
                <h3><?= __('My Cart') ?></h3>
                <span class="action toggle">
                    <!-- ko text: getLabel('<?= $block->getCurrentStoreLocale() ?>') --><!-- /ko -->
                    <!-- ko if: getCartParam('subtotal') -->
                        <span data-bind="html: ' â€” '+getCartParam('subtotal')"></span>
                    <!-- /ko -->
                </span>
            </span>
        </span>
    </a>
    <?php if($block->getIsNeedToDisplaySideBar()): ?>
        <div class="sidebar" data-bind="scope: 'minicart_content'">
            <!-- ko template: getTemplate() --><!-- /ko -->
        </div>
        <script type="text/x-magento-init">
        {
            "header .sidebar": {
                "dropdownDialog": {
                    "appendTo": "header .cart",
                    "triggerTarget": "header .cart > a",
                    "closeOnMouseLeave": false,
                    "parentClass": "active",
                    "triggerClass": "active",
                    "buttons": []
                }
            }
        }
        </script>
    <?php endif; ?>
</div>
<script>
    window.checkout = <?= \Zend_Json::encode($block->getConfig()) ?>;
</script>
<script type="text/x-magento-init">
{
    "*": {
        "Magento_Ui/js/core/app": <?= $block->getJsLayout() ?>,
        "Magento_Ui/js/block-loader": ""
    }
}
</script>
